# 行程詳細內容管理功能

這個功能可以為沒有詳細行程內容的行程自動添加符合國家特色的景點和時間安排。

## 功能特色

- 🎯 **智能景點選擇**: 根據行程地區自動選擇符合的景點
- ⏰ **合理時間安排**: 每天安排2-4個景點，時間在8:00-19:00之間
- 🌍 **多國家支援**: 支援日本、韓國、泰國、新加坡、馬來西亞、越南、台灣
- 📅 **天數適配**: 根據行程天數進行合理分配
- 🔄 **批量處理**: 支援單個和批量添加詳細內容

## API 端點

### 1. 獲取沒有詳細行程的行程列表
```
GET /api/trips-without-details
```

**回應格式:**
```json
{
  "success": true,
  "data": [
    {
      "trip_id": 123,
      "title": "東京之旅",
      "description": "探索東京的精彩景點",
      "start_date": "2024-01-01",
      "end_date": "2024-01-05",
      "area": "日本",
      "duration_days": 5
    }
  ],
  "count": 1,
  "message": "找到 1 個沒有詳細行程內容的行程"
}
```

### 2. 為單個行程添加詳細內容
```
POST /api/add-trip-details
```

**請求格式:**
```json
{
  "trip_id": 123
}
```

**回應格式:**
```json
{
  "success": true,
  "message": "已為行程「東京之旅」添加 15 個詳細景點",
  "trip_id": 123,
  "details_count": 15,
  "days": 5
}
```

### 3. 批量添加詳細內容
```
POST /api/batch-add-trip-details
```

**請求格式:**
```json
{
  "limit": 10
}
```

**回應格式:**
```json
{
  "success": true,
  "message": "批量處理完成，成功處理 5 個行程",
  "processed_count": 5,
  "total_details_added": 45,
  "results": [
    {
      "trip_id": 123,
      "title": "東京之旅",
      "success": true,
      "details_count": 15,
      "days": 5
    }
  ]
}
```

## 管理頁面

訪問 `/admin` 頁面可以使用圖形化介面管理行程詳細內容：

### 功能包括：
- 📋 查看沒有詳細行程內容的行程列表
- ➕ 為單個行程添加詳細內容
- 🔄 批量添加詳細內容（可設定數量限制）
- 📊 即時查看處理結果

## 支援的國家和景點

### 日本
- **東京**: 淺草寺・雷門、東京晴空塔・墨田水族館、澀谷十字路口・忠犬八公像、明治神宮・原宿竹下通、東京迪士尼樂園・迪士尼海洋、上野公園・動物園、秋葉原・電器街、銀座・築地市場
- **大阪**: 大阪城・天守閣、道頓堀・固力果跑男、環球影城・哈利波特世界、天保山摩天輪・海遊館、心齋橋・美國村、通天閣・新世界、大阪水族館・海遊館、四天王寺・天王寺公園
- **京都**: 金閣寺・龍安寺、清水寺・地主神社、伏見稻荷大社・千本鳥居、嵐山竹林・渡月橋、二条城・御苑、祇園・花見小路、銀閣寺・哲學之道、天龍寺・竹林小徑
- **北海道**: 札幌市區・大通公園、小樽運河・堺町通り、富良野薰衣草田、美瑛青池・白鬚瀑布、函館山夜景・朝市、登別地獄谷・熊牧場、新千歲機場商圈、洞爺湖・昭和新山

### 韓國
- **首爾**: 景福宮、明洞、南山首爾塔、弘大、東大門、北村韓屋村、梨花洞壁畫村、樂天世界
- **釜山**: 海雲台海水浴場、甘川洞文化村、釜山塔、札嘎其市場、廣安里海水浴場、太宗台、梵魚寺、龍頭山公園

### 泰國
- **曼谷**: 大皇宮、臥佛寺、鄭王廟、考山路、暹羅廣場、水上市場、四面佛、曼谷藝術文化中心
- **清邁**: 雙龍寺、清邁古城、素貼山、週日夜市、清邁大學、茵他儂國家公園、清邁夜間動物園、清邁女子監獄按摩

### 新加坡
- **新加坡**: 濱海灣金沙、魚尾獅公園、聖淘沙島、牛車水、小印度、烏節路、新加坡植物園、克拉碼頭

### 馬來西亞
- **吉隆坡**: 雙子塔、獨立廣場、茨廠街、國家清真寺、黑風洞、雲頂高原、馬來西亞國家博物館、吉隆坡塔
- **檳城**: 喬治市、升旗山、檳城壁畫、姓氏橋、檳城國家公園、檳城植物園、檳城美食街、檳城大橋

### 越南
- **河內**: 還劍湖、胡志明陵寢、文廟、三十六古街、河內大教堂、西湖、越南民族學博物館、河內歌劇院
- **胡志明市**: 統一宮、西貢聖母大教堂、中央郵局、范五老街、湄公河三角洲、古芝地道、胡志明市美術館、濱城市場

### 台灣
- **台北**: 台北101、故宮博物院、士林夜市、陽明山國家公園、九份老街、淡水老街、西門町、貓空纜車
- **台中**: 逢甲夜市、彩虹眷村、高美濕地、台中公園、東海大學、新社花海、大坑步道、台中歌劇院

## 使用範例

### 1. 使用管理頁面
1. 訪問 `http://localhost:3000/admin`
2. 查看沒有詳細行程內容的行程列表
3. 點擊「批量添加詳細內容」按鈕
4. 設定處理數量限制（預設10個）
5. 等待處理完成

### 2. 使用API
```javascript
// 獲取沒有詳細行程的行程
const response = await fetch('/api/trips-without-details');
const data = await response.json();

// 為單個行程添加詳細內容
const addResponse = await fetch('/api/add-trip-details', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ trip_id: 123 })
});

// 批量添加詳細內容
const batchResponse = await fetch('/api/batch-add-trip-details', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ limit: 5 })
});
```

## 測試

運行測試腳本來驗證功能：

```bash
node test-trip-details.js
```

## 注意事項

1. **重複添加**: 系統會檢查行程是否已有詳細內容，避免重複添加
2. **地區匹配**: 如果行程沒有指定地區，預設使用日本的景點
3. **時間安排**: 每天安排2-4個景點，時間在8:00-19:00之間
4. **資料庫**: 確保 `line_trip_details` 表格存在並有正確的結構

## 資料庫結構

確保 `line_trip_details` 表格包含以下欄位：
- `detail_id` (主鍵)
- `trip_id` (外鍵，關聯到 line_trips)
- `location` (景點名稱)
- `date` (日期)
- `start_time` (開始時間)
- `end_time` (結束時間)
- `description` (景點描述) 